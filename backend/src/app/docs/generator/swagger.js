const swaggerAutogen = require('swagger-autogen')()

const version = process.env.BACKEND_SWAGGER_VER ?? "v1";

const port = process.env.BACKEND_SERVICE_PORT ?? 8600;

const doc = {
    info: {
        version: "1.0.0",
        title: "ENFTIS API Documentation",
        description: "Documentation automatically generated by the <b>swagger-autogen</b> module."
    },
    host: "127.0.0.1:"+port,
    basePath: "/",
    schemes: ['http', 'https'],
    consumes: ['application/json'],
    produces: ['application/json'],
    tags: [
        {
            "name": "Client",
            "description": "Client Endpoints: The identity of device that consumes the API."
        },
        {
            "name": "User",
            "description": "User Endpoints: The User Model"
        },
        {
            "name": "NFTs",
            "description": "User Endpoints: The User Model"
        },
        {
            "name": "Collections",
            "description": "User Endpoints: The User Model"
        },
        {
            "name": "Charts",
            "description": "User Endpoints: The User Model"
        },
        {
            "name": "Domains",
            "description": "User Endpoints: The User Model"
        },
        {
            "name": "Land",
            "description": "User Endpoints: The User Model"
        },
        {
            "name": "Art",
            "description": "User Endpoints: The User Model"
        },
        {
            "name": "Music",
            "description": "User Endpoints: The User Model"
        },
        {
            "name": "Gaming",
            "description": "User Endpoints: The User Model"
        },
    ],
    securityDefinitions: {
        apiKeyAuth:{
            type: "apiKey",
            in: "header",    // can be "header", "query" or "cookie"
            name: "Bearer",  // name of the header, query parameter or cookie
            description: "The bearer to authenticate the request."
        }
    },
    definitions: {
        Client: {
            clientDeviceId: 'SERIAL1234567890',
            clientDeviceName: 'My Device #001',
            clientDevicePubKey: 'client.public.pem',
            serverDevicePubKey: 'server.public.pem',
            clientDeviceUserAgent: 'Device Browser v 5.0.0',
            $clientId: 'a187ao9a3afe36a3984ca7',
            $clientSecret: 'cco9a3afe36a187ao9a3afe36a3984ca7a3984ca7a187ao9a3afe36a3984ca7',
        },
        User: {
            $firstName: 'John',
            $lastName: 'Doe',
            username: 'john.doe',
            emailAddress: 'john.doe@domain.tld',
            password: 'pass123',
            phoneNumber: '+1 (234) 567 8901',
            photoURL: 'https://img.com',
            age: '24',
            accessLevels: {
                defaultRole: 'admin',
                roles: ['admin', 'observer'],
                permissions: ['can-view', 'can-edit', 'can-create', 'can-delete']
            },
            organization: '693483902049',
            firebaseUserData: {
                uid: 'iLX9898yhdsiudk',
                displayName: 'John Doe',
                email: 'john.doe@domain.tld',
                phoneNumber: '+1 (234) 567 8901',
                photoURL: 'https://img.com'
            },
            clientId: {
                $ref: '#/definitions/Client'
            },
        },
    }
}

const outputFile = './src/app/docs/output/swagger-'+version+'.json'
const endpointsFiles = ['./src/index.ts']

swaggerAutogen(outputFile, endpointsFiles, doc).then(() => {
    require('./src/index.ts') // Your project's root file
})